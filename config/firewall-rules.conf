# iptables-docker 防火墙规则配置文件
# 
# 格式说明:
# 1. 以 # 开头的行是注释
# 2. 空行会被忽略
# 3. 每行一条规则,格式如下:
#
# 开放端口规则:
#   ALLOW_PORT <端口号> <协议> <源IP/CIDR> [描述]
#   例如: ALLOW_PORT 80 tcp 0.0.0.0/0 Web服务
#
# 允许源IP规则:
#   ALLOW_SOURCE <源IP/CIDR> [描述]
#   例如: ALLOW_SOURCE 192.168.1.0/24 内网访问
#
# 端口转发规则:
#   FORWARD_PORT <外部端口> <内部IP> <内部端口> <协议> [描述]
#   例如: FORWARD_PORT 8080 172.17.0.2 80 tcp 转发到容器
#

# ============================================
# SSH 访问配置
# ============================================
ALLOW_PORT 22 tcp 0.0.0.0/0 SSH远程访问

# ============================================
# Web 服务配置
# ============================================
# ALLOW_PORT 80 tcp 0.0.0.0/0 HTTP服务
# ALLOW_PORT 443 tcp 0.0.0.0/0 HTTPS服务

# ============================================
# 其他服务配置
# ============================================
# ALLOW_PORT 3306 tcp 192.168.1.0/24 MySQL数据库(仅内网)
# ALLOW_PORT 6379 tcp 192.168.1.0/24 Redis(仅内网)

# ============================================
# 允许的源IP配置
# ============================================
# ALLOW_SOURCE 192.168.1.100 管理员机器
# ALLOW_SOURCE 10.0.0.0/8 内部网络

# ============================================
# Docker Swarm 配置 (如需要请取消注释)
# ============================================
# ALLOW_PORT 2377 tcp 192.168.1.0/24 Swarm管理端口
# ALLOW_PORT 7946 tcp 192.168.1.0/24 Swarm节点通信
# ALLOW_PORT 7946 udp 192.168.1.0/24 Swarm节点通信
# ALLOW_PORT 4789 udp 192.168.1.0/24 Swarm overlay网络

# ============================================
# 容器端口白名单配置（控制外部访问容器）
# ============================================
# 格式：ALLOW_CONTAINER_PORT <端口> <协议> <源IP> [描述]
# 说明：控制外部机器访问bridge模式容器的映射端口，容器间通信不受影响
# 注意：Host网络模式的容器请使用 ALLOW_PORT 配置
# 
# ALLOW_CONTAINER_PORT 3306 tcp 192.168.1.0/24 MySQL容器
# ALLOW_CONTAINER_PORT 6379 tcp 127.0.0.1 Redis容器(仅本机)
# ALLOW_CONTAINER_PORT 27017 tcp 10.0.0.0/8 MongoDB容器

